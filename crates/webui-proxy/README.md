# Webui proxy
This is a webhook endpoint component that:
* serves static files of `webui` package generated by `trunk dist`
* proxies `/api` requests to the `TARGET_URL`, the gRPC endpoint of Obelisk.

## Running in obelisk
The component is automatically loaded when `obelisk.toml` contains:
```toml
webui.listening_addr = "127.0.0.1:8080"
```

In order to use the development version of the proxy, remove the line above.
Add the `webui-proxy` as a webhook endpoint:
```toml
[[http_server]]
name = "webui"
listening_addr = "127.0.0.1:8080"

[[webhook_endpoint]]
name = "webui"
http_server = "webui"
location.path = "target/wasm32-wasip2/release_trunk/webui_proxy.wasm"
routes = [""]
env_vars = ["TARGET_URL=http://127.0.0.1:5005"]
forward_stdout = "stderr"
forward_stderr = "stderr"
```

## Pushing to docker hub
See [webui-bump.sh](../../scripts/webui-bump.sh).
